---
title: "Chart-topping Songs Have Gotten More Depressing, More Dominant Over Time"
author: ''
date: '2018-10-09'
output:
  html_document:
    df_print: paged
slug: popular-music-is-getting-more-depressing-over-time
tags: []
categories: []
---

```{r results='asis', echo=FALSE, include=FALSE}
library(dplyr)
library(ggplot2)
library(hrbrthemes)
library(plotly)
library(highcharter)
library(moderndive)
library(broom)

load("C:/Users/nyulo/Documents/R/blogg/tracks_subset")
```


```{r, echo = FALSE, warning=FALSE, message = FALSE}

lm <- lm(valence ~ release_year, data = tracks_subset)

avg_line <- get_regression_points(lm) %>% 
  rename(x = release_year, y = valence_hat) %>% 
  select(x,y)

tracks2 <- tracks_subset %>% 
  filter(!is.na(release_year)) %>% 
  mutate(decade = release_year - release_year %% 10) %>%
  rowwise %>% 
  mutate(tooltip = paste0('<b>Artist:</b> ', artist_name,
                          '<br><b>Track:</b> ', track_name,
                          '<br><b>Album:</b> ', album_name,
                          '<br><b>Valence:</b> ', valence)
         ) %>% ungroup()

hchart(tracks2, 'scatter', hcaes(x = jitter(release_year), y = jitter(valence))) %>% 
  hc_tooltip(formatter = JS(paste0("function() {return this.point.tooltip;}")), useHTML = T) %>% 
  hc_add_series(data = avg_line, type = 'line', color = 'black') %>%
  hc_colors('lightgrey') %>%
  hc_xAxis(max = 2018, min = 1960, title = list(text = '')) %>% 
  hc_yAxis(max = 1, title = list(text = 'Valence')) %>% 
  hc_title(text = 'Song Valence By Release Year') %>% 
  hc_subtitle(text = '(1960 - 2018)') %>% 
  hc_add_theme(hc_theme_smpl())


```
\newline
\newline

The graph above shows Spotify's "valence" metric for each Billboard Hot 100 chart-topping song over the past half-century. While they don't share details regarding exactly what goes into its calculation, Spotify describes valence as:

>A measure from 0.0 to 1.0 describing the musical positiveness conveyed by a track. Tracks with high valence sound more positive (e.g. happy, cheerful, euphoric), while tracks with low valence sound more negative (e.g. sad, depressed, angry).

Between the years of 1960 and 2018, average valence has fallen by approximately 17%.

The downward sloping line is a naive linear regression (highly statistically significant for those who are wondering):

```{r, echo = FALSE, message = FALSE, warning = FALSE}

lm <- lm(valence ~ release_year, data = tracks_subset)
tidy(lm)

```

One of the first questions that comes to mind is if this effect is coming from supply side or demand side factors: are musicians and producers outputting a pool of progressively darker hits, or is the public craving more depressing tones themselves? 

The answer to this question is beyond the scope of this post, but post in the comments if you have any thoughts on what might be driving this trend!

For now we'll turn to a few more charts that help tell the story.
<br>
<br>
<br>



## "Tired Of Hearing About Being In Love"

```{r, echo = FALSE, warning=FALSE, message = FALSE}
  
  tracks_subset %>% 
    select(track_name, valence, release_year) %>% 
    group_by(release_year) %>%
    mutate(mean_val = mean(valence)) %>%
    ungroup %>% 
    ggplot(aes(release_year,valence)) +
    geom_jitter(alpha = .1) +
    geom_smooth() +
    theme_ipsum_rc() +
    theme(panel.grid = element_blank()) +
    labs(title = "Nonlinear Trends In Valence")
  

```

As can be seen above, chart-toppers from the the 1960s and 1970s remained mostly constant regarding their average valence, and crucially, at peak levels for our sample period. However, the beginning of the 1980s turned markedly darker, a trend that would continue until the end of the following decade, where things brightened up a bit.

What factors could have led to such a stark change in popular music in the early 1980s? This could perhaps be best summed up by quote from Juan Atkins, the godfather of techno music:

> "Within the last 5 years or so, the Detroit underground has been experimenting with technology, stretching it rather than simply using it. As the price of sequencers and synthesizers has dropped, so the experimentation has become more intense. Basically, we're tired of hearing about being in love or falling out, tired of the R&B system, so a new progressive sound has emerged. We call it techno!""
â€” Juan Atkins, 1988

This rejection of the sugar coated dance hits of yesteryear was aided by another technological advancement: casette players. For the first time, devices like the widly popular Sony Walkman (1979) allowed for the consumption of music on an individual basis as opposed to solely in group settings, and as a result, music became an increasingly less communal experience.


```{r, echo = FALSE, warning=FALSE, message = FALSE}

tracks_subset %>%
    select(track_name, valence, release_year) %>% 
    mutate(decade = release_year - release_year %% 10) %>%
    filter(!is.na(decade)) %>% 
    ggplot(aes(valence)) + 
    geom_density() +
    facet_wrap(~decade) +
    theme_ipsum_rc() + 
    theme(panel.grid = element_blank()) +
    labs(title = "Chart-topper Valence By Decade",
         subtitle = '1960 to Present')
```

On a whole, we can see that the valence fallout of the 1980s led the 1990s to be the darkest decade of the years we're considering. And while the 2000s showed signs of a trend reversal, the current decade again peaks in low valence hits. 


```{r, echo = FALSE, warning=FALSE, message = FALSE}

tracks_subset %>%
  group_by(release_year) %>% 
  summarize(n = n()) %>% 
  ggplot(aes(x = release_year, y = n)) +
  geom_point() +
  geom_smooth(method = 'lm')  +
  theme_ipsum_rc() +
    theme(panel.grid = element_blank()) +
    labs(title = "Number of Chart Toppers By Year",
         subtitle = "1960 - 2018", x = "", y = "")

```

This final chart shows that the number of chart-toppers per year has decreased significantly over time, and again the relationship is highly significant. This is the same as saying that 

* Number 1 hits have greater staying power today than in past years. This could be due to producers and musicians having monopolized popular music

```{r, include = FALSE}
#servr::daemon_stop("571100792")

#* During this time, advances in instrument technology led to the emergence of #new forms of electronic music, which rejected the sugar coated dance hits of #previous decades. While these underground hits were far from topping charts, #this movement undoubtedly had an effect on music of all varieties. From #Wikipedia:
```






